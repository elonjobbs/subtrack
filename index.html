<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>StopMySub - Subscription Tracker</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body, #root { height: 100%; }
        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; 
            background: #f8f9fa; 
            color: #1a1a2e;
            -webkit-font-smoothing: antialiased;
        }
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --danger: #ef4444;
            --danger-light: #fef2f2;
            --danger-border: #fecaca;
            --success: #22c55e;
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --text-primary: #1a1a2e;
            --text-secondary: #64748b;
            --border: #e2e8f0;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useMemo } = React;
        
        // Cancel links database
        const cancelLinks = {
            'netflix': 'https://www.netflix.com/cancelplan',
            'spotify': 'https://www.spotify.com/account/subscription/',
            'hulu': 'https://secure.hulu.com/account',
            'disney': 'https://www.disneyplus.com/account/subscription',
            'disney+': 'https://www.disneyplus.com/account/subscription',
            'amazon prime': 'https://www.amazon.com/mc/pipelines/cancelPrime',
            'amazon': 'https://www.amazon.com/mc/pipelines/cancelPrime',
            'apple': 'https://support.apple.com/en-us/HT202039',
            'apple music': 'https://support.apple.com/en-us/HT202039',
            'icloud': 'https://support.apple.com/en-us/HT207594',
            'youtube': 'https://www.youtube.com/paid_memberships',
            'youtube premium': 'https://www.youtube.com/paid_memberships',
            'hbo': 'https://www.max.com/account/subscription',
            'max': 'https://www.max.com/account/subscription',
            'paramount': 'https://www.paramountplus.com/account/',
            'peacock': 'https://www.peacocktv.com/account/subscription',
            'adobe': 'https://account.adobe.com/plans',
            'microsoft': 'https://account.microsoft.com/services/',
            'dropbox': 'https://www.dropbox.com/account/plan',
            'chatgpt': 'https://chat.openai.com/#settings/subscription',
            'openai': 'https://chat.openai.com/#settings/subscription',
            'gym': null,
            'fitness': null,
        };
        
        const getCancelLink = (name) => {
            const lower = name.toLowerCase();
            for (const [key, url] of Object.entries(cancelLinks)) {
                if (lower.includes(key)) return url;
            }
            return null;
        };
        
        const getIcon = (name) => {
            const lower = name.toLowerCase();
            if (lower.includes('netflix')) return 'üé¨';
            if (lower.includes('spotify')) return 'üéµ';
            if (lower.includes('disney')) return 'üè∞';
            if (lower.includes('hulu')) return 'üì∫';
            if (lower.includes('amazon') || lower.includes('prime')) return 'üì¶';
            if (lower.includes('apple') || lower.includes('icloud')) return '‚òÅÔ∏è';
            if (lower.includes('youtube')) return '‚ñ∂Ô∏è';
            if (lower.includes('hbo') || lower.includes('max')) return 'üé≠';
            if (lower.includes('gym') || lower.includes('fitness')) return 'üí™';
            if (lower.includes('adobe')) return 'üé®';
            if (lower.includes('microsoft') || lower.includes('office')) return 'üíº';
            if (lower.includes('dropbox')) return 'üìÅ';
            if (lower.includes('chatgpt') || lower.includes('openai')) return 'ü§ñ';
            return 'üìÑ';
        };
        
        const getCategory = (name) => {
            const lower = name.toLowerCase();
            if (['netflix', 'hulu', 'disney', 'hbo', 'max', 'paramount', 'peacock'].some(s => lower.includes(s))) return 'Entertainment';
            if (['spotify', 'apple music', 'youtube music'].some(s => lower.includes(s))) return 'Music';
            if (['gym', 'fitness', 'peloton'].some(s => lower.includes(s))) return 'Fitness';
            if (['icloud', 'dropbox', 'google', 'microsoft', 'adobe'].some(s => lower.includes(s))) return 'Storage';
            if (['chatgpt', 'openai'].some(s => lower.includes(s))) return 'AI';
            return 'Other';
        };
        
        // Demo subscriptions
        const demoSubscriptions = [
            { id: 1, name: 'iCloud', price: 2.99, category: 'Storage', icon: '‚òÅÔ∏è', billingDay: 1, cancelUrl: getCancelLink('icloud') },
            { id: 2, name: 'Gym Membership', price: 29.99, category: 'Fitness', icon: 'üí™', billingDay: 1, cancelUrl: null },
            { id: 3, name: 'Spotify', price: 9.99, category: 'Music', icon: 'üéµ', billingDay: 3, cancelUrl: getCancelLink('spotify') },
            { id: 4, name: 'Disney+', price: 13.99, category: 'Entertainment', icon: 'üè∞', billingDay: 8, cancelUrl: getCancelLink('disney') },
            { id: 5, name: 'Netflix', price: 15.99, category: 'Entertainment', icon: 'üé¨', billingDay: 15, cancelUrl: getCancelLink('netflix') },
            { id: 6, name: 'ChatGPT Plus', price: 20.00, category: 'AI', icon: 'ü§ñ', billingDay: 18, cancelUrl: getCancelLink('chatgpt') },
            { id: 7, name: 'Adobe Creative', price: 54.99, category: 'Storage', icon: 'üé®', billingDay: 22, cancelUrl: getCancelLink('adobe') },
            { id: 8, name: 'YouTube Premium', price: 13.99, category: 'Entertainment', icon: '‚ñ∂Ô∏è', billingDay: 25, cancelUrl: getCancelLink('youtube') },
        ];
        
        // Landing Page
        const LandingPage = ({ onGetStarted, onDemo }) => (
            <div style={{ minHeight: '100vh', background: 'linear-gradient(180deg, #f8f9fa 0%, #e2e8f0 100%)' }}>
                <div style={{ maxWidth: '800px', margin: '0 auto', padding: '60px 20px', textAlign: 'center' }}>
                    <div style={{ marginBottom: '40px' }}>
                        <div style={{ fontSize: '48px', marginBottom: '16px' }}>üõë</div>
                        <h1 style={{ fontSize: 'clamp(32px, 8vw, 48px)', fontWeight: 700, color: 'var(--text-primary)', marginBottom: '16px' }}>
                            StopMySub
                        </h1>
                        <p style={{ fontSize: '18px', color: 'var(--text-secondary)', maxWidth: '500px', margin: '0 auto' }}>
                            Find and cancel forgotten subscriptions draining your bank account
                        </p>
                    </div>
                    
                    <div style={{ background: 'var(--bg-primary)', borderRadius: '24px', padding: '40px 24px', marginBottom: '32px', boxShadow: '0 4px 24px rgba(0,0,0,0.06)' }}>
                        <h2 style={{ fontSize: '24px', fontWeight: 600, marginBottom: '24px' }}>How it works</h2>
                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '24px', textAlign: 'left' }}>
                            {[
                                { icon: 'üìÑ', title: 'Upload Statements', desc: 'Drop your bank or credit card PDF statements' },
                                { icon: 'üîç', title: 'Auto-Detect', desc: 'We scan for recurring charges locally on your device' },
                                { icon: 'üõë', title: 'Cancel Easy', desc: 'One-click links to cancel any subscription' }
                            ].map((step, i) => (
                                <div key={i} style={{ display: 'flex', gap: '12px', alignItems: 'flex-start' }}>
                                    <span style={{ fontSize: '28px' }}>{step.icon}</span>
                                    <div>
                                        <h3 style={{ fontWeight: 600, marginBottom: '4px' }}>{step.title}</h3>
                                        <p style={{ fontSize: '14px', color: 'var(--text-secondary)' }}>{step.desc}</p>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                    
                    <div style={{ display: 'flex', flexDirection: 'column', gap: '12px', maxWidth: '320px', margin: '0 auto' }}>
                        <button 
                            onClick={onGetStarted}
                            style={{ background: 'var(--primary)', color: '#fff', border: 'none', padding: '16px 32px', borderRadius: '12px', fontSize: '16px', fontWeight: 600, cursor: 'pointer' }}
                        >
                            Upload Statements ‚Äî $5
                        </button>
                        <button 
                            onClick={onDemo}
                            style={{ background: 'transparent', color: 'var(--text-secondary)', border: '1px solid var(--border)', padding: '14px 32px', borderRadius: '12px', fontSize: '15px', cursor: 'pointer' }}
                        >
                            Try Demo
                        </button>
                    </div>
                    
                    <p style={{ marginTop: '32px', fontSize: '13px', color: 'var(--text-secondary)' }}>
                        üîí 100% Private ‚Ä¢ Files processed locally ‚Ä¢ Nothing uploaded
                    </p>
                </div>
            </div>
        );
        
        // Upload Page (simplified for brevity)
        const UploadPage = ({ onSubscriptionsFound, onBack }) => {
            const [files, setFiles] = useState([]);
            const [processing, setProcessing] = useState(false);
            
            const handleFileSelect = (e) => {
                const selected = Array.from(e.target.files);
                setFiles(prev => [...prev, ...selected]);
            };
            
            return (
                <div style={{ minHeight: '100vh', background: 'var(--bg-secondary)', padding: '40px 20px' }}>
                    <div style={{ maxWidth: '600px', margin: '0 auto' }}>
                        <button onClick={onBack} style={{ background: 'none', border: 'none', color: 'var(--text-secondary)', cursor: 'pointer', marginBottom: '24px' }}>‚Üê Back</button>
                        <h1 style={{ fontSize: '28px', fontWeight: 700, marginBottom: '32px' }}>Upload Statements</h1>
                        
                        <div style={{ background: 'var(--bg-primary)', border: '2px dashed var(--border)', borderRadius: '16px', padding: '48px 24px', textAlign: 'center', marginBottom: '24px' }}>
                            <div style={{ fontSize: '48px', marginBottom: '16px' }}>üìÑ</div>
                            <label style={{ background: 'var(--primary)', color: '#fff', padding: '12px 24px', borderRadius: '8px', cursor: 'pointer', fontWeight: 500 }}>
                                Select PDF Files
                                <input type="file" accept=".pdf" multiple onChange={handleFileSelect} style={{ display: 'none' }} />
                            </label>
                        </div>
                        
                        {files.length > 0 && (
                            <p style={{ textAlign: 'center', marginBottom: '24px' }}>{files.length} file(s) selected</p>
                        )}
                        
                        <button 
                            onClick={() => onSubscriptionsFound(demoSubscriptions)}
                            disabled={files.length === 0}
                            style={{ width: '100%', background: files.length === 0 ? 'var(--border)' : 'var(--primary)', color: files.length === 0 ? 'var(--text-secondary)' : '#fff', border: 'none', padding: '16px', borderRadius: '12px', fontSize: '16px', fontWeight: 600, cursor: files.length === 0 ? 'not-allowed' : 'pointer' }}
                        >
                            Scan for Subscriptions
                        </button>
                    </div>
                </div>
            );
        };
        
        // Dashboard - MOBILE OPTIMIZED
        const Dashboard = ({ subscriptions, onBack }) => {
            const [view, setView] = useState('list');
            const [currentMonth, setCurrentMonth] = useState(new Date());
            const [showCancelModal, setShowCancelModal] = useState(null);
            const [selectedDay, setSelectedDay] = useState(null);
            
            const monthlyTotal = subscriptions.reduce((sum, s) => sum + s.price, 0);
            const yearlyTotal = monthlyTotal * 12;
            
            const daysInMonth = new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1, 0).getDate();
            const firstDayOfMonth = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), 1).getDay();
            
            const subscriptionsByDay = useMemo(() => {
                const map = {};
                subscriptions.forEach(sub => {
                    const day = sub.billingDay;
                    if (!map[day]) map[day] = [];
                    map[day].push(sub);
                });
                return map;
            }, [subscriptions]);
            
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            
            return (
                <div style={{ minHeight: '100vh', background: 'var(--bg-secondary)', display: 'flex', flexDirection: 'column' }}>
                    {/* Header - Compact */}
                    <div style={{ background: 'var(--bg-primary)', borderBottom: '1px solid var(--border)', padding: '12px 16px' }}>
                        {/* Logo & Total */}
                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px' }}>
                            <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                                <span style={{ background: 'var(--primary)', color: '#fff', width: '32px', height: '32px', borderRadius: '8px', display: 'flex', alignItems: 'center', justifyContent: 'center', fontWeight: 700, fontSize: '14px' }}>S</span>
                                <span style={{ fontWeight: 600, fontSize: '16px' }}>StopMySub</span>
                            </div>
                            <div style={{ textAlign: 'right' }}>
                                <div style={{ fontSize: '11px', color: 'var(--text-secondary)', textTransform: 'uppercase' }}>Monthly</div>
                                <div style={{ fontSize: '20px', fontWeight: 700 }}>${monthlyTotal.toFixed(2)}</div>
                            </div>
                        </div>
                        
                        {/* View Toggle */}
                        <div style={{ display: 'flex', background: 'var(--bg-secondary)', borderRadius: '8px', padding: '4px' }}>
                            <button 
                                onClick={() => setView('calendar')}
                                style={{ flex: 1, padding: '10px', border: 'none', borderRadius: '6px', background: view === 'calendar' ? 'var(--bg-primary)' : 'transparent', fontWeight: view === 'calendar' ? 600 : 400, cursor: 'pointer', fontSize: '14px', boxShadow: view === 'calendar' ? '0 1px 3px rgba(0,0,0,0.1)' : 'none' }}
                            >
                                Calendar
                            </button>
                            <button 
                                onClick={() => setView('list')}
                                style={{ flex: 1, padding: '10px', border: 'none', borderRadius: '6px', background: view === 'list' ? 'var(--bg-primary)' : 'transparent', fontWeight: view === 'list' ? 600 : 400, cursor: 'pointer', fontSize: '14px', boxShadow: view === 'list' ? '0 1px 3px rgba(0,0,0,0.1)' : 'none' }}
                            >
                                List
                            </button>
                        </div>
                    </div>
                    
                    {/* Main Content */}
                    <div style={{ flex: 1, padding: '16px', overflow: 'auto' }}>
                        
                        {view === 'calendar' ? (
                            <>
                                {/* COMPACT CALENDAR - Fits on mobile screen */}
                                <div style={{ background: 'var(--bg-primary)', borderRadius: '16px', padding: '16px', marginBottom: '16px' }}>
                                    {/* Month Nav */}
                                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>
                                        <button onClick={() => setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1))} style={{ background: 'none', border: '1px solid var(--border)', borderRadius: '8px', padding: '8px 12px', cursor: 'pointer', fontSize: '16px' }}>‚Üê</button>
                                        <span style={{ fontWeight: 600, fontSize: '16px' }}>{monthNames[currentMonth.getMonth()]} {currentMonth.getFullYear()}</span>
                                        <button onClick={() => setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1))} style={{ background: 'none', border: '1px solid var(--border)', borderRadius: '8px', padding: '8px 12px', cursor: 'pointer', fontSize: '16px' }}>‚Üí</button>
                                    </div>
                                    
                                    {/* Day Headers */}
                                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(7, 1fr)', gap: '2px', marginBottom: '4px' }}>
                                        {['S', 'M', 'T', 'W', 'T', 'F', 'S'].map((day, i) => (
                                            <div key={i} style={{ textAlign: 'center', fontSize: '11px', color: 'var(--text-secondary)', fontWeight: 600, padding: '4px 0' }}>{day}</div>
                                        ))}
                                    </div>
                                    
                                    {/* Calendar Grid - COMPACT cells */}
                                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(7, 1fr)', gap: '3px' }}>
                                        {Array(firstDayOfMonth).fill(null).map((_, i) => (
                                            <div key={`empty-${i}`} style={{ aspectRatio: '1', minHeight: '36px' }}></div>
                                        ))}
                                        {Array(daysInMonth).fill(null).map((_, i) => {
                                            const day = i + 1;
                                            const daySubs = subscriptionsByDay[day] || [];
                                            const hasSubscription = daySubs.length > 0;
                                            
                                            return (
                                                <div 
                                                    key={day} 
                                                    onClick={() => hasSubscription && setSelectedDay({ day, subs: daySubs })}
                                                    style={{ 
                                                        aspectRatio: '1',
                                                        minHeight: '36px',
                                                        background: hasSubscription ? 'var(--danger-light)' : 'var(--bg-secondary)',
                                                        borderRadius: '8px',
                                                        display: 'flex',
                                                        flexDirection: 'column',
                                                        alignItems: 'center',
                                                        justifyContent: 'center',
                                                        cursor: hasSubscription ? 'pointer' : 'default',
                                                        border: hasSubscription ? '1px solid var(--danger-border)' : '1px solid transparent',
                                                        position: 'relative'
                                                    }}
                                                >
                                                    <span style={{ fontSize: '13px', fontWeight: hasSubscription ? 600 : 400, color: hasSubscription ? 'var(--danger)' : 'var(--text-primary)' }}>{day}</span>
                                                    {hasSubscription && (
                                                        <div style={{ 
                                                            position: 'absolute',
                                                            bottom: '2px',
                                                            display: 'flex',
                                                            gap: '1px'
                                                        }}>
                                                            {daySubs.slice(0, 3).map((_, idx) => (
                                                                <div key={idx} style={{ width: '4px', height: '4px', borderRadius: '50%', background: 'var(--danger)' }}></div>
                                                            ))}
                                                        </div>
                                                    )}
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>
                                
                                {/* Legend / Summary below calendar */}
                                <div style={{ background: 'var(--bg-primary)', borderRadius: '12px', padding: '16px' }}>
                                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '12px' }}>
                                        <div style={{ width: '12px', height: '12px', borderRadius: '4px', background: 'var(--danger-light)', border: '1px solid var(--danger-border)' }}></div>
                                        <span style={{ fontSize: '13px', color: 'var(--text-secondary)' }}>Billing day - tap to see details</span>
                                    </div>
                                    <div style={{ fontSize: '13px', color: 'var(--text-secondary)' }}>
                                        <strong style={{ color: 'var(--text-primary)' }}>{subscriptions.length}</strong> subscriptions totaling <strong style={{ color: 'var(--danger)' }}>${yearlyTotal.toFixed(2)}/year</strong>
                                    </div>
                                </div>
                            </>
                        ) : (
                            /* LIST VIEW */
                            <div style={{ background: 'var(--bg-primary)', borderRadius: '16px', overflow: 'hidden' }}>
                                <div style={{ padding: '16px', borderBottom: '1px solid var(--border)' }}>
                                    <h2 style={{ fontSize: '17px', fontWeight: 600, margin: 0 }}>All Subscriptions</h2>
                                </div>
                                
                                {subscriptions.map((sub, index) => (
                                    <div 
                                        key={sub.id} 
                                        style={{ 
                                            display: 'flex', 
                                            alignItems: 'center', 
                                            padding: '14px 16px',
                                            borderBottom: index < subscriptions.length - 1 ? '1px solid var(--border)' : 'none',
                                            gap: '12px'
                                        }}
                                    >
                                        {/* Icon */}
                                        <div style={{ width: '40px', height: '40px', background: 'var(--bg-secondary)', borderRadius: '10px', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '20px', flexShrink: 0 }}>
                                            {sub.icon}
                                        </div>
                                        
                                        {/* Name & Category */}
                                        <div style={{ flex: 1, minWidth: 0 }}>
                                            <div style={{ fontWeight: 600, fontSize: '15px', whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}>{sub.name}</div>
                                            <div style={{ fontSize: '12px', color: 'var(--text-secondary)' }}>{sub.category} ‚Ä¢ Day {sub.billingDay}</div>
                                        </div>
                                        
                                        {/* Price */}
                                        <div style={{ textAlign: 'right', flexShrink: 0, marginRight: '4px' }}>
                                            <div style={{ fontWeight: 600, fontSize: '15px' }}>${sub.price.toFixed(2)}</div>
                                            <div style={{ fontSize: '11px', color: 'var(--text-secondary)' }}>/mo</div>
                                        </div>
                                        
                                        {/* Cancel Button */}
                                        <button 
                                            onClick={() => setShowCancelModal(sub)}
                                            style={{ background: 'var(--danger)', color: '#fff', border: 'none', padding: '8px 14px', borderRadius: '8px', fontWeight: 600, cursor: 'pointer', fontSize: '13px', flexShrink: 0 }}
                                        >
                                            Cancel
                                        </button>
                                    </div>
                                ))}
                            </div>
                        )}
                        
                        {/* Yearly Total */}
                        <div style={{ marginTop: '16px', background: 'var(--bg-primary)', borderRadius: '12px', padding: '16px', textAlign: 'center' }}>
                            <span style={{ color: 'var(--text-secondary)', fontSize: '13px' }}>Yearly: </span>
                            <span style={{ fontSize: '18px', fontWeight: 700, color: 'var(--danger)' }}>${yearlyTotal.toFixed(2)}</span>
                        </div>
                    </div>
                    
                    {/* Day Detail Modal */}
                    {selectedDay && (
                        <div style={{ position: 'fixed', inset: 0, background: 'rgba(0,0,0,0.5)', display: 'flex', alignItems: 'flex-end', justifyContent: 'center', zIndex: 1000 }} onClick={() => setSelectedDay(null)}>
                            <div style={{ background: 'var(--bg-primary)', borderRadius: '20px 20px 0 0', padding: '24px', width: '100%', maxWidth: '500px', maxHeight: '60vh', overflow: 'auto' }} onClick={e => e.stopPropagation()}>
                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>
                                    <h3 style={{ fontSize: '18px', fontWeight: 700 }}>Day {selectedDay.day}</h3>
                                    <button onClick={() => setSelectedDay(null)} style={{ background: 'none', border: 'none', fontSize: '24px', cursor: 'pointer', color: 'var(--text-secondary)' }}>√ó</button>
                                </div>
                                
                                {selectedDay.subs.map(sub => (
                                    <div key={sub.id} style={{ display: 'flex', alignItems: 'center', gap: '12px', padding: '12px 0', borderBottom: '1px solid var(--border)' }}>
                                        <span style={{ fontSize: '28px' }}>{sub.icon}</span>
                                        <div style={{ flex: 1 }}>
                                            <div style={{ fontWeight: 600 }}>{sub.name}</div>
                                            <div style={{ fontSize: '13px', color: 'var(--text-secondary)' }}>${sub.price.toFixed(2)}/mo</div>
                                        </div>
                                        <button 
                                            onClick={() => { setSelectedDay(null); setShowCancelModal(sub); }}
                                            style={{ background: 'var(--danger)', color: '#fff', border: 'none', padding: '8px 16px', borderRadius: '8px', fontWeight: 600, cursor: 'pointer', fontSize: '13px' }}
                                        >
                                            Cancel
                                        </button>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}
                    
                    {/* Cancel Modal */}
                    {showCancelModal && (
                        <div style={{ position: 'fixed', inset: 0, background: 'rgba(0,0,0,0.5)', display: 'flex', alignItems: 'center', justifyContent: 'center', padding: '20px', zIndex: 1001 }}>
                            <div style={{ background: 'var(--bg-primary)', borderRadius: '20px', padding: '28px', maxWidth: '340px', width: '100%', textAlign: 'center' }}>
                                <div style={{ fontSize: '48px', marginBottom: '16px' }}>{showCancelModal.icon}</div>
                                <h3 style={{ fontSize: '20px', fontWeight: 700, marginBottom: '8px' }}>Cancel {showCancelModal.name}?</h3>
                                <p style={{ color: 'var(--text-secondary)', marginBottom: '24px', fontSize: '14px' }}>
                                    Save ${showCancelModal.price.toFixed(2)}/mo (${(showCancelModal.price * 12).toFixed(2)}/yr)
                                </p>
                                
                                {showCancelModal.cancelUrl ? (
                                    <a href={showCancelModal.cancelUrl} target="_blank" rel="noopener noreferrer" style={{ display: 'block', background: 'var(--danger)', color: '#fff', padding: '14px', borderRadius: '12px', textDecoration: 'none', fontWeight: 600, marginBottom: '12px' }}>
                                        Go to Cancellation Page ‚Üí
                                    </a>
                                ) : (
                                    <p style={{ background: 'var(--bg-secondary)', padding: '14px', borderRadius: '12px', color: 'var(--text-secondary)', marginBottom: '12px', fontSize: '14px' }}>
                                        No direct link. Contact {showCancelModal.name} to cancel.
                                    </p>
                                )}
                                
                                <button onClick={() => setShowCancelModal(null)} style={{ width: '100%', background: 'transparent', border: '1px solid var(--border)', color: 'var(--text-secondary)', padding: '14px', borderRadius: '12px', cursor: 'pointer' }}>
                                    Keep Subscription
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };
        
        // Main App
        const App = () => {
            const [page, setPage] = useState('landing');
            const [subscriptions, setSubscriptions] = useState([]);
            
            const handleDemo = () => {
                setSubscriptions(demoSubscriptions);
                setPage('dashboard');
            };
            
            switch (page) {
                case 'landing': return <LandingPage onGetStarted={() => setPage('upload')} onDemo={handleDemo} />;
                case 'upload': return <UploadPage onSubscriptionsFound={(subs) => { setSubscriptions(subs); setPage('dashboard'); }} onBack={() => setPage('landing')} />;
                case 'dashboard': return <Dashboard subscriptions={subscriptions} onBack={() => setPage('landing')} />;
                default: return <LandingPage onGetStarted={() => setPage('upload')} onDemo={handleDemo} />;
            }
        };
        
        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
